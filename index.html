<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://pixijs.download/release/pixi.min.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #000; }
        canvas { display: block; width: 100%; height: 100vh; }
    </style>
</head>
<body>
    <script>
        // Сообщаем Телеграму, что приложение готово
        const tg = window.Telegram.WebApp;
        tg.expand(); // Разворачиваем на весь экран

        // Создаем игру
        const app = new PIXI.Application({
            background: '#2c3e50',
            resizeTo: window
        });
        document.body.appendChild(app.view);

        // Пример: Рисуем "Здание" при клике
        app.stage.eventMode = 'static';
        app.stage.on('pointerdown', (e) => {
            const building = new PIXI.Graphics();
            building.beginFill(0xffd700);
            building.drawRect(-25, -25, 50, 50);
            building.endFill();
            building.x = e.global.x;
            building.y = e.global.y;
            app.stage.addChild(building);

            // ОТПРАВКА ДАННЫХ В БОТ:
            // Это то, что ты просил — связь игры и бота
            tg.sendData(JSON.stringify({
                action: "build",
                x: Math.round(e.global.x),
                y: Math.round(e.global.y)
            }));
        });
    </script>
</body>
</html>